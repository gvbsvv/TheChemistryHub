<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Chemistry Hub</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header">The Chemistry Hub</div>

    <div class="content-container">

        <div class="intro-section">  <h2>Introduction to Chemistry</h2>
            <div id="intro-content">Loading...</div>  </div>

        <div class="chemistry-section">
            <h2>ðŸ“˜ AP Chemistry</h2>
            <ul class="chemistry-links">
                <li><a href="viewer.html?file=atomic-structure.md">Atomic Structure and Properties</a></li>
                <li><a href="viewer.html?file=compound-structure.md">Compound Structure and Properties</a></li>
                <li><a href="viewer.html?file=substance-properties.md">Properties of Substances and Mixtures</a></li>
                <li><a href="viewer.html?file=chemical-reactions.md">Chemical Reactions</a></li>
                <li><a href="viewer.html?file=kinetics.md">Kinetics</a></li>
                <li><a href="viewer.html?file=thermochemistry.md">Thermochemistry</a></li>
                <li><a href="viewer.html?file=equilibrium.md">Equilibrium</a></li>
                <li><a href="viewer.html?file=acids-bases.md">Acids and Bases</a></li>
                <li><a href="viewer.html?file=thermodynamics-electrochemistry.md">Thermodynamics and Electrochemistry</a></li>
            </ul>
        </div>

        <div class="chemistry-section">
            <h2>ðŸ“— General Chemistry</h2>
            <ul class="chemistry-links">
                <li><a href="viewer.html?file=chemical-bonding.md">Chemical Bonding</a></li>
                <li><a href="viewer.html?file=stoichiometry.md">Stoichiometry</a></li>
                <li><a href="viewer.html?file=states-of-matter.md">State of Matter</a></li>
                <li><a href="viewer.html?file=solutions.md">Solutions</a></li>
                <li><a href="viewer.html?file=gas-laws.md">Gas Laws</a></li>
                <li><a href="viewer.html?file=redox-reactions.md">Redox Reactions</a></li>
            </ul>
        </div>
    </div>

    <script>
        // ... (Your existing JavaScript code: loadMarkdown, getFormattedTitle, generateTableOfContents) ...

        // Load the intro content (Introduction to Chemistry)
        window.addEventListener('DOMContentLoaded', () => {
            loadMarkdown('introduction-to-chemistry.md', 'intro-content');  // Call loadMarkdown for intro
            loadMarkdown(); // Call loadMarkdown for other sections (if needed)
        });

        async function loadMarkdown(file = null, targetElementId = 'content') { // Modified function
            if (file === null) {
              const urlParams = new URLSearchParams(window.location.search);
              file = urlParams.get('file');
              if (!file) {
                document.getElementById("content").innerText = "No file specified.";
                return;
              }
            }
            console.log("Fetching file:", file);

            try {
                const rawURL = `https://raw.githubusercontent.com/gvbsvv/TheChemistryHub/main/${file}`;
                console.log("Fetching from:", rawURL);
                const response = await fetch(rawURL);
                if (!response.ok) {
                    console.error("Raw URL:", rawURL);
                    console.error("Response status:", response.status);
                    const errorText = await response.text();
                    console.error("Response text:", errorText);
                    throw new Error(`File not found (Status: ${response.status})`);
                }

                const text = await response.text();
                const converter = new showdown.Converter();
                let htmlContent = converter.makeHtml(text);

                htmlContent = generateTableOfContents(htmlContent);

                document.getElementById(targetElementId).innerHTML = htmlContent; // Use targetElementId

                document.querySelectorAll("pre code").forEach(hljs.highlightElement);

                if (targetElementId === 'content') { // Only set title for main content
                    document.title = getFormattedTitle(file);
                }

            } catch (error) {
                console.error("Error loading markdown:", error);
                document.getElementById(targetElementId).innerText = "Error loading file. Make sure the file exists and the URL is correct.";
            }
        }


        // ... (rest of your JavaScript functions)
    </script>
</body>
</html>
